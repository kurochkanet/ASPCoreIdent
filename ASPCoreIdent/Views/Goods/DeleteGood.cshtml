@model ASPCoreIdent.Models.Good.GoodVM

@{
    ViewBag.Title = "DeleteGood";
}

<h1>DeleteGood</h1>

    <h3>Are you sure you want to delete this good?</h3>

    <div>

        <hr />
        <dl class="row">
            @Html.HiddenFor(model => model.Id)

            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Name)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Name)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Price)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Price)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Descr)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Descr)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Photo)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Photo)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Reserve)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Reserve)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.CategoryId)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.CategoryId)
            </dd>
        </dl>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input id="delete-button" type="button" value="Delete" />
            </div>
        </div>
        <br>
        <br />

    </div>
    <div>
        @Html.ActionLink("Back to the List", "Index")
        
    </div>

<script>
    $(document).ready(function ()
    {
        $("#delete-button").click(function () {
            var id = $("input[name=Id]").val();

            $.ajax({
                url: '/Goods/Delete/'+id,
                type: 'DELETE',
                success: function (result) {
                    alert("This product deleted successfully!");
                    window.location.href= '@Url.Action("Index", "Goods")';
                    // Do something with the result
                },
                error: function (error)
                {
                    var str = "This product can not be deleted!\r\nDetails:\r\n" + error;
                    alert(str);
                }
            });
        })
    });
</script>